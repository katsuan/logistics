{
  "version": 3,
  "sources": ["../../yubinbango-core2/yubinbango-core.ts"],
  "sourcesContent": ["let CACHE = [];\nmodule YubinBango {\n  export class Core {\n    URL = 'https://yubinbango.github.io/yubinbango-data/data';\n    REGION: string[] = [\n      null, '北海道', '青森県', '岩手県', '宮城県',\n      '秋田県', '山形県', '福島県', '茨城県', '栃木県',\n      '群馬県', '埼玉県', '千葉県', '東京都', '神奈川県',\n      '新潟県', '富山県', '石川県', '福井県', '山梨県',\n      '長野県', '岐阜県', '静岡県', '愛知県', '三重県',\n      '滋賀県', '京都府', '大阪府', '兵庫県', '奈良県',\n      '和歌山県', '鳥取県', '島根県', '岡山県', '広島県',\n      '山口県', '徳島県', '香川県', '愛媛県', '高知県',\n      '福岡県', '佐賀県', '長崎県', '熊本県', '大分県',\n      '宮崎県', '鹿児島県', '沖縄県'\n    ];\n    constructor(inputVal: string = '', callback?) {\n      if(inputVal){\n        // 全角の数字を半角に変換 ハイフンが入っていても数字のみの抽出\n        const a:string = inputVal.replace(/[０-９]/g, (s: string) => String.fromCharCode(s.charCodeAt(0) - 65248));\n        const b:RegExpMatchArray = a.match(/\\d/g);\n        const c:string = b.join('');\n        const yubin7: string = this.chk7(c);\n        // 7桁の数字の時のみ作動\n        if (yubin7) {\n          this.getAddr(yubin7, callback);\n        } else {\n          callback(this.addrDic());\n        }\n      }\n    }\n    chk7(val: string) {\n      if (val.length === 7) {\n        return val;\n      }\n    }\n    addrDic(region_id = '', region = '', locality = '', street = '', extended = ''):{[key:string]: string} {\n      return {\n        'region_id': region_id,\n        'region': region,\n        'locality': locality,\n        'street': street,\n        'extended': extended\n      };\n    }\n    selectAddr(addr: string[]):{[key:string]: string} {\n      if (addr && addr[0] && addr[1]) {\n        return this.addrDic(addr[0],this.REGION[addr[0]],addr[1],addr[2],addr[3])\n      } else {\n        return this.addrDic()\n      }\n    }\n    jsonp(url: string, fn) {\n      window['$yubin'] = (data) => fn(data);\n      const scriptTag = document.createElement(\"script\");\n      scriptTag.setAttribute(\"type\", \"text/javascript\");\n      scriptTag.setAttribute(\"charset\", \"UTF-8\");\n      scriptTag.setAttribute(\"src\", url);\n      document.head.appendChild(scriptTag);\n    }\n    getAddr(yubin7: string, fn):{[key:string]: string} {\n      const yubin3 = yubin7.substr(0, 3);\n      // 郵便番号上位3桁でキャッシュデータを確認\n      if (yubin3 in CACHE && yubin7 in CACHE[yubin3]) {\n        return fn(this.selectAddr(CACHE[yubin3][yubin7]));\n      } else {\n        this.jsonp(`${this.URL}/${yubin3}.js`, (data) => {\n          CACHE[yubin3] = data;\n          return fn(this.selectAddr(data[yubin7]));\n        });\n      }\n    }\n  }\n}\n\nexport = YubinBango;\n"],
  "mappings": "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",
  "names": ["YubinBango", "Core"]
}
